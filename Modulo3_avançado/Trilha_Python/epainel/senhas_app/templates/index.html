<!doctype html>
<html lang="pt">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>e-Painel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        * {
            margin: 0 !important;
            padding: 0 !important;
            box-sizing: border-box !important;
        }
        body {
            grid-template-rows: 6rem auto 4rem;
        }
        .dropdown-menu {
            left: auto !important;
        }
        .dropdown-item:hover {
            color: #5c65c0;
            transition: all .5s;
        }
        .perfil {
            height: 3.5rem;
            text-indent: 1rem;
            display: flex;
            align-items: center;
        }
    </style>
  </head>
  <body class="container-fluid min-vh-100 d-grid">
    <!-- Modais -->
    {% if user.is_authenticated %}
    <div id="modal-edit" class="modal" tabindex="-1">
        <div class="modal-dialog position-absolute top-50 start-50 translate-middle w-50">
            <div class="modal-content p-2">
                <form action="{% url 'editarperfil' %}" method='post'>
                    {% csrf_token %}
                    <h2 class="text-center"> Editar Perfil </h2>
                    <strong> Usuário: </strong>
                    <div class="perfil">
                        {{user.username}}
                    </div>
                    <strong> Nome: </strong>
                    <div class="perfil">
                        <div class="row gap-2">
                            <div class="col-auto">
                                {{formperfil.cargo}}
                            </div>
                            <div class="col">
                                {{formperfil.first_name}}
                            </div>
                            <div class="col">
                                {{formperfil.last_name}}    
                            </div>
                        </div>
                    </div>
                    <strong> Email: </strong>
                    <div class="perfil">
                        {{formperfil.email}}
                    </div>
                    <strong> Matrícula: </strong>
                    <div class="perfil">
                        {{formperfil.matricula}}
                    </div>
                    <strong> CPF: </strong>
                    <div class="perfil">
                        {{formperfil.cpf}}
                    </div>
                    <strong> Local: </strong>
                    <div class="perfil">
                        {{formperfil.local}}
                    </div>
                    <div class="d-flex justify-content-end">
                        <a data-bs-toggle="modal" data-bs-target="#modal-confirm" class="btn text-danger px-2 py-1">Encerrar conta</a>
                        <button type="button" class="btn btn-secondary px-2 py-1 me-2" data-bs-dismiss="modal">Fechar</button>
                        <button type="submit" class="btn btn-success px-2 py-1">Concluir</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div id="modal-confirm" class="modal" tabindex="-1">
        <div class="modal-dialog position-absolute top-50 start-50 translate-middle w-50">
            <div class="modal-content p-2">
                <h3 class="text-center"> Remover conta </h3>
                <p class="my-2"> Sua conta será permanentemente removida. Essa operação não pode ser desfeita, tem certeza? </p>
                <div class="d-flex justify-content-end">
                    <button type="button" class="btn btn-secondary px-2 py-1 me-2" data-bs-dismiss="modal">Cancelar</button>
                    <a href="{% url 'encerrar' %}" class="btn btn-danger px-2 py-1">Encerrar conta</a>
                </div>
            </div>
        </div>
    </div>
    <div id="modal-perfil" class="modal" tabindex="-1">
        <div class="modal-dialog position-absolute top-50 start-50 translate-middle w-50">
          <div class="modal-content p-2">
            <h2 class="text-center"> Perfil </h2>
                <strong> Usuário: </strong>
                <div class="perfil">
                    {{user.username}}
                </div>
                <strong> Nome: </strong>
                <div class="perfil">
                    {{user.cargo}} {{user.first_name}} {{user.last_name}}
                </div>
                <strong> Email: </strong>
                <div class="perfil">
                    {{user.email}}
                </div>
                <strong> Matrícula: </strong>
                <div class="perfil">
                    {{user.matricula}}
                </div>
                <strong> CPF: </strong>
                <div class="perfil">
                    {{user.cpf}}
                </div>
                <strong> Local: </strong>
                <div class="perfil">
                    {{user.local}}
                </div>
                <div class="d-flex justify-content-end">
                    <a data-bs-toggle="modal" data-bs-target="#modal-confirm" class="btn text-danger px-2 py-1">Encerrar conta</a>
                    <button type="button" class="btn btn-secondary px-2 py-1 me-2" data-bs-dismiss="modal">Fechar</button>
                    <a data-bs-toggle="modal" data-bs-target="#modal-edit" class="btn btn-success px-2 py-1">Alterar</a>
                </div>
          </div>
        </div>
    </div>
        {% block modais %}
        {% endblock modais %}
    {% else %}
    <div id="modal-login" class="modal" tabindex="-1">
        <div class="modal-dialog position-absolute top-50 start-50 translate-middle w-50">
          <div class="modal-content p-2">
            <h2 class="text-center"> Login </h2>
            <form action="{% url 'login' %}" method="post">
                {% csrf_token %}
                {{formuser.username}}
                {{formuser.password}}
                <div class="d-flex justify-content-end">
                    <button type="button" class="btn btn-secondary px-2 py-1 me-2" data-bs-dismiss="modal">Cancelar</button>
                    <button type="submit" class="btn btn-success px-2 py-1">Login</button>
                </div>
            </form>
          </div>
        </div>
    </div>
    {% endif %}

    <!-- Nav -->
    <nav class="navbar navbar-expand bg-dark p-3">
        <div class="container-fluid">
          <a class="navbar-brand text-light" href="#">e-Painel</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            </ul>
            {% if user.is_authenticated %}
            <div class="dropdown">
                    <a class="nav-link dropdown-toggle text-light" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                            <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"/>
                        </svg>
                        {{user.first_name}} {{user.last_name}}
                    </a>
                    <ul class="dropdown-menu position-absolute end-0 p-2">
                      <li><a class="dropdown-item btn" data-bs-toggle="modal" data-bs-target="#modal-perfil">Perfil</a></li>
                      <li><a class="dropdown-item btn" href="#">Chamar Cliente</a></li>
                        {% if user.is_superuser %}
                          <li><a href="{% url 'painel' %}" class="dropdown-item btn">Painel Administrativo</a></li>
                        {% endif %}
                      <li><a class="dropdown-item btn" href="{% url 'logout' %}">Sair</a></li>
                    </ul>
            </div>
            {% else %}
            <div>
                <a class="btn text-light" data-bs-target="#modal-login" data-bs-toggle="modal"> Login </a>
            </div>
            {% endif %}
          </div>
        </div>
    </nav>

    <!-- main -->
    <main>
        {% block main %}
        <section class="row h-100 justify-content-center align-content-center">
            <h2 class="col-10 col-sm-4 align-items-center d-flex justify-content-start">
                Chame seus clientes pelo nome ao invés de números ou gritos.
            </h2>
            <div class="col-10 col-sm-6">
                {% load static %}
                <img class="w-100" src="{% static 'queue_undraw.svg' %}">
            </div>
        </section>
        {% endblock main %}
    </main>

    <!-- footer -->
    <footer class="bg-dark text-light text-center p-3">
        Copyright &copy; 2024
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>